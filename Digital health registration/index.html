<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Health Registration</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Language Selector -->
        <div class="language-selector">
            <select id="languageSelect">
                <option value="en">üá∫üá∏ English</option>
                <option value="hi">üáÆüá≥ ‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                <option value="ml">üáÆüá≥ ‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
            </select>
        </div>

        <header>
            <h1 id="mainTitle">Digital Health Registration</h1>
            <p id="subtitle">Your digital key to a healthier future</p>
        </header>

        <main>
            <div class="form-container">
                <!-- Basic Registration Form -->
                <form id="basicForm">
                    <h2 id="formTitle">Registration Form</h2>
                    
                    <div class="form-group">
                        <label for="name" id="nameLabel">Full Name:</label>
                        <div class="input-with-mic">
                            <input type="text" id="name" name="name" required>
                            <button type="button" class="mic-btn" onclick="startVoiceInput('name')">üé§</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="date_of_birth" id="dobLabel">Date of Birth:</label>
                        <input type="date" id="date_of_birth" name="date_of_birth" required>
                    </div>

                    <div class="form-group">
                        <label for="city" id="cityLabel">City:</label>
                        <div class="input-with-mic">
                            <input type="text" id="city" name="city" required>
                            <button type="button" class="mic-btn" onclick="startVoiceInput('city')">üé§</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email" id="emailLabel">Email:</label>
                        <div class="input-with-mic">
                            <input type="email" id="email" name="email" required>
                            <button type="button" class="mic-btn" onclick="startVoiceInput('email')">üé§</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="blood_group" id="bloodGroupLabel">Blood Group:</label>
                        <select id="blood_group" name="blood_group" required>
                            <option value="">Select Blood Group</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="aadhar_number" id="aadharLabel">Aadhar Number:</label>
                        <input type="text" id="aadhar_number" name="aadhar_number" pattern="[0-9]{12}" maxlength="12" required>
                        <small id="aadharHelp">Enter 12-digit Aadhar number</small>
                    </div>

                    <div class="form-buttons">
                        <button type="button" id="nextBtn" onclick="generateHealthID()">Next</button>
                    </div>
                </form>

                <!-- Health ID Display -->
                <div id="healthIdSection" class="health-id-section" style="display: none;">
                    <h2 id="healthIdTitle">Your Health ID Generated!</h2>
                    <div class="health-id-display">
                        <div class="health-id-card">
                            <h3 id="healthIdValue"></h3>
                            <p id="healthIdMessage">Please save this Health ID for future login</p>
                        </div>
                    </div>
                    <div class="form-buttons">
                        <button type="button" id="proceedToABYBtn" onclick="showABYVerification()">Verify Ayushman Bharat</button>
                        <button type="button" id="skipABYBtn" onclick="showHealthProfile()">Skip ABY (Continue)</button>
                    </div>
                </div>

                <!-- ABY Verification Section -->
                <div id="abyVerificationSection" class="aby-verification-section" style="display: none;">
                    <h2 id="abyVerificationTitle">üè• Ayushman Bharat Yojana Verification</h2>
                    <p id="abyDescription">Verify your eligibility for ‚Çπ5,00,000 annual health insurance coverage</p>
                    
                    <form id="abyVerificationForm">
                        <div class="form-group">
                            <label for="annualIncome" id="annualIncomeLabel">Annual Family Income (‚Çπ):</label>
                            <div class="input-with-mic">
                                <input type="number" id="annualIncome" name="annualIncome" placeholder="e.g., 200000" required>
                                <button type="button" class="mic-btn" onclick="startVoiceInput('annualIncome')">üé§</button>
                            </div>
                            <small id="annualIncomeHelp">Income should be ‚â§ ‚Çπ5,00,000 for ABY eligibility</small>
                        </div>

                        <div class="form-group">
                            <label for="familySize" id="familySizeLabel">Family Size:</label>
                            <select id="familySize" name="familySize" required>
                                <option value="">Select Family Size</option>
                                <option value="1">1 member</option>
                                <option value="2">2 members</option>
                                <option value="3">3 members</option>
                                <option value="4">4 members</option>
                                <option value="5">5 members</option>
                                <option value="6">6+ members</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="state" id="stateLabel">State:</label>
                            <div class="input-with-mic">
                                <input type="text" id="state" name="state" placeholder="e.g., Kerala, Delhi" required>
                                <button type="button" class="mic-btn" onclick="startVoiceInput('state')">üé§</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="district" id="districtLabel">District:</label>
                            <div class="input-with-mic">
                                <input type="text" id="district" name="district" placeholder="e.g., Thiruvananthapuram">
                                <button type="button" class="mic-btn" onclick="startVoiceInput('district')">üé§</button>
                            </div>
                        </div>

                        <div class="form-buttons">
                            <button type="submit" id="verifyABYBtn">Verify ABY Eligibility</button>
                            <button type="button" onclick="showHealthProfile()">Skip ABY</button>
                        </div>
                    </form>

                    <div id="abyResult" class="aby-result"></div>
                </div>

                <!-- Health Profile Form -->
                <div id="healthProfileSection" class="health-profile-section" style="display: none;">
                    <h2 id="healthProfileTitle">Detailed Health Profile</h2>
                    <form id="healthProfileForm">
                        
                        <div class="form-group">
                            <label for="chronic_diseases" id="chronicDiseasesLabel">Chronic Diseases:</label>
                            <div class="input-with-mic">
                                <textarea id="chronic_diseases" name="chronic_diseases" rows="3" placeholder="e.g., Diabetes, Hypertension, Asthma"></textarea>
                                <button type="button" class="mic-btn" onclick="startVoiceInput('chronic_diseases')">üé§</button>
                            </div>
                            <small id="chronicDiseasesHelp">List any long-term health conditions</small>
                        </div>

                        <div class="form-group">
                            <label for="allergies" id="allergiesLabel">Allergies:</label>
                            <div class="input-with-mic">
                                <textarea id="allergies" name="allergies" rows="3" placeholder="e.g., Penicillin, Dust, Peanuts"></textarea>
                                <button type="button" class="mic-btn" onclick="startVoiceInput('allergies')">üé§</button>
                            </div>
                            <small id="allergiesHelp">List any known allergies</small>
                        </div>

                        <div class="form-group">
                            <label for="emergency_contact" id="emergencyContactLabel">Emergency Contact:</label>
                            <div class="input-with-mic">
                                <input type="text" id="emergency_contact" name="emergency_contact" placeholder="Name and Phone Number">
                                <button type="button" class="mic-btn" onclick="startVoiceInput('emergency_contact')">üé§</button>
                            </div>
                            <small id="emergencyContactHelp">Emergency contact person and phone number</small>
                        </div>

                        <div class="form-group">
                            <label for="current_medication" id="currentMedicationLabel">Current Medication:</label>
                            <div class="input-with-mic">
                                <textarea id="current_medication" name="current_medication" rows="3" placeholder="e.g., Metformin 500mg daily"></textarea>
                                <button type="button" class="mic-btn" onclick="startVoiceInput('current_medication')">üé§</button>
                            </div>
                            <small id="currentMedicationHelp">List current medications with dosage</small>
                        </div>

                        <div class="form-buttons">
                            <button type="submit" id="completeRegistrationBtn">Complete Registration</button>
                        </div>
                    </form>
                </div>

                <!-- Fingerprint Section -->
                <div id="fingerprintSection" class="fingerprint-section" style="display: none;">
                    <h2 id="fingerprintTitle">Health Scan</h2>
                    <p id="fingerprintMessage">Place your thumb on the sensor for health screening</p>
                    <button type="button" id="fingerprintBtn" class="fingerprint-btn">
                        <span class="fingerprint-icon">üëÜ</span>
                        <span id="fingerprintBtnText">Fingerprint Sensor</span>
                    </button>
                    <div id="scanResult" class="scan-result"></div>
                </div>

                <!-- Login Section -->
                <div id="loginSection" class="login-section" style="display: none;">
                    <h2 id="loginTitle">Worker Login</h2>
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="loginHealthId" id="loginHealthIdLabel">Health ID:</label>
                            <div class="input-with-mic">
                                <input type="text" id="loginHealthId" name="loginHealthId" placeholder="HLTH-YYYYMMDD-XXXXX" required>
                                <button type="button" class="mic-btn" onclick="startVoiceInput('loginHealthId')">üé§</button>
                            </div>
                        </div>
                        <div class="form-buttons">
                            <button type="submit" id="loginBtn">Login</button>
                            <button type="button" onclick="showRegistration()">New Registration</button>
                        </div>
                    </form>
                </div>

                <!-- Dashboard Section -->
                <div id="dashboardSection" class="dashboard-section" style="display: none;">
                    <h2 id="dashboardTitle">Worker Dashboard</h2>
                    
                    <div class="dashboard-tabs">
                        <button class="tab-btn active" onclick="showTab('profile')">üë§ Profile</button>
                        <button class="tab-btn" onclick="showTab('aby')">üè• ABY Benefits</button>
                        <button class="tab-btn" onclick="showTab('hospitals')">üè® Find Hospitals</button>
                        <button class="tab-btn" onclick="showTab('family')">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family</button>
                    </div>

                    <div id="profileTab" class="tab-content active">
                        <div id="userProfile" class="user-profile"></div>
                    </div>

                    <div id="abyTab" class="tab-content">
                        <div id="abyBenefitsDisplay" class="aby-benefits-display">
                            <div class="benefits-card">
                                <h3>üè• Ayushman Bharat Yojana Benefits</h3>
                                <div id="abyCardInfo"></div>
                            </div>
                        </div>
                    </div>

                    <div id="hospitalsTab" class="tab-content">
                        <div class="hospital-finder">
                            <h3>üè® Find Empaneled Hospitals</h3>
                            <div class="search-controls">
                                <input type="text" id="hospitalCitySearch" placeholder="Search by city">
                                <select id="specialtyFilter">
                                    <option value="">All Specialties</option>
                                    <option value="Cardiology">Cardiology</option>
                                    <option value="Neurology">Neurology</option>
                                    <option value="Oncology">Oncology</option>
                                    <option value="Orthopedics">Orthopedics</option>
                                    <option value="General Surgery">General Surgery</option>
                                    <option value="Pediatrics">Pediatrics</option>
                                    <option value="Gynecology">Gynecology</option>
                                </select>
                                <button onclick="searchHospitals()">Search</button>
                            </div>
                            <div id="hospitalsList" class="hospitals-list"></div>
                        </div>
                    </div>

                    <div id="familyTab" class="tab-content">
                        <div class="family-management">
                            <h3>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Members</h3>
                            
                            <div class="add-family-form">
                                <h4>Add Family Member</h4>
                                <form id="addFamilyForm">
                                    <div class="form-row">
                                        <input type="text" id="memberName" placeholder="Member Name" required>
                                        <select id="memberRelation" required>
                                            <option value="">Relation</option>
                                            <option value="Spouse">Spouse</option>
                                            <option value="Son">Son</option>
                                            <option value="Daughter">Daughter</option>
                                            <option value="Father">Father</option>
                                            <option value="Mother">Mother</option>
                                            <option value="Brother">Brother</option>
                                            <option value="Sister">Sister</option>
                                        </select>
                                        <input type="number" id="memberAge" placeholder="Age" min="0" max="120">
                                        <select id="memberGender">
                                            <option value="">Gender</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                    <div class="form-row">
                                        <input type="text" id="memberAadhar" placeholder="Aadhar Number (Optional)" maxlength="12">
                                        <button type="submit">Add Member</button>
                                    </div>
                                </form>
                            </div>
                            
                            <div id="familyMembersList" class="family-members-list"></div>
                        </div>
                    </div>

                    <div class="form-buttons">
                        <button type="button" onclick="logout()">Logout</button>
                    </div>
                </div>
            </div>
        </main>

        <nav class="bottom-nav">
            <button onclick="showRegistration()" id="navRegister">Register</button>
            <button onclick="showLogin()" id="navLogin">Login</button>
        </nav>

        <div id="messageArea" class="message-area"></div>
    </div>

    <script>
        let currentHealthId = null;
        let currentUserData = null;
        let currentLanguage = 'en';
        let currentUser = null;

        // Language translations
        const translations = {
            en: {
                mainTitle: "Digital Health Registration",
                subtitle: "Your digital key to a healthier future",
                formTitle: "Registration Form",
                nameLabel: "Full Name:",
                dobLabel: "Date of Birth:",
                cityLabel: "City:",
                emailLabel: "Email:",
                bloodGroupLabel: "Blood Group:",
                aadharLabel: "Aadhar Number:",
                aadharHelp: "Enter 12-digit Aadhar number",
                healthIdTitle: "Your Health ID Generated!",
                healthIdMessage: "Please save this Health ID for future login",
                healthProfileTitle: "Detailed Health Profile",
                chronicDiseasesLabel: "Chronic Diseases:",
                chronicDiseasesHelp: "List any long-term health conditions",
                allergiesLabel: "Allergies:",
                allergiesHelp: "List any known allergies",
                emergencyContactLabel: "Emergency Contact:",
                emergencyContactHelp: "Emergency contact person and phone number",
                currentMedicationLabel: "Current Medication:",
                currentMedicationHelp: "List current medications with dosage",
                fingerprintTitle: "Health Scan",
                fingerprintMessage: "Place your thumb on the sensor for health screening",
                fingerprintBtnText: "Fingerprint Sensor",
                loginTitle: "Worker Login",
                loginHealthIdLabel: "Health ID:",
                dashboardTitle: "Worker Dashboard",
                navRegister: "Register",
                navLogin: "Login"
            },
            hi: {
                mainTitle: "‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£",
                subtitle: "‡§è‡§ï ‡§∏‡•ç‡§µ‡§∏‡•ç‡§• ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§ï‡•Ä ‡§Ü‡§™‡§ï‡•Ä ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§ï‡•Å‡§Ç‡§ú‡•Ä",
                formTitle: "‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§´‡•â‡§∞‡•ç‡§Æ",
                nameLabel: "‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ:",
                dobLabel: "‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø:",
                cityLabel: "‡§∂‡§π‡§∞:",
                emailLabel: "‡§à‡§Æ‡•á‡§≤:",
                bloodGroupLabel: "‡§∞‡§ï‡•ç‡§§ ‡§∏‡§Æ‡•Ç‡§π:",
                aadharLabel: "‡§Ü‡§ß‡§æ‡§∞ ‡§®‡§Ç‡§¨‡§∞:",
                aadharHelp: "12 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§Ü‡§ß‡§æ‡§∞ ‡§®‡§Ç‡§¨‡§∞ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç",
                healthIdTitle: "‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§Ü‡§à‡§°‡•Ä ‡§§‡•à‡§Ø‡§æ‡§∞!",
                healthIdMessage: "‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø ‡§Æ‡•á‡§Ç ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡•á ‡§≤‡§ø‡§è ‡§á‡§∏ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§Ü‡§à‡§°‡•Ä ‡§ï‡•ã ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç",
                healthProfileTitle: "‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤",
                chronicDiseasesLabel: "‡§™‡•Å‡§∞‡§æ‡§®‡•Ä ‡§¨‡•Ä‡§Æ‡§æ‡§∞‡§ø‡§Ø‡§æ‡§Ç:",
                chronicDiseasesHelp: "‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§¶‡•Ä‡§∞‡•ç‡§ò‡§ï‡§æ‡§≤‡§ø‡§ï ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡•ç‡§•‡§ø‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡•Ç‡§ö‡•Ä‡§¨‡§¶‡•ç‡§ß ‡§ï‡§∞‡•á‡§Ç",
                allergiesLabel: "‡§è‡§≤‡§∞‡•ç‡§ú‡•Ä:",
                allergiesHelp: "‡§ï‡§ø‡§∏‡•Ä ‡§≠‡•Ä ‡§ú‡•ç‡§û‡§æ‡§§ ‡§è‡§≤‡§∞‡•ç‡§ú‡•Ä ‡§ï‡•ã ‡§∏‡•Ç‡§ö‡•Ä‡§¨‡§¶‡•ç‡§ß ‡§ï‡§∞‡•á‡§Ç",
                emergencyContactLabel: "‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï:",
                emergencyContactHelp: "‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§î‡§∞ ‡§´‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞",
                currentMedicationLabel: "‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§¶‡§µ‡§æ:",
                currentMedicationHelp: "‡§ñ‡•Å‡§∞‡§æ‡§ï ‡§ï‡•á ‡§∏‡§æ‡§• ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§¶‡§µ‡§æ‡§ì‡§Ç ‡§ï‡•Ä ‡§∏‡•Ç‡§ö‡•Ä ‡§¨‡§®‡§æ‡§è‡§Ç",
                fingerprintTitle: "‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∏‡•ç‡§ï‡•à‡§®",
                fingerprintMessage: "‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡§æ ‡§Ö‡§Ç‡§ó‡•Ç‡§†‡§æ ‡§∏‡•á‡§Ç‡§∏‡§∞ ‡§™‡§∞ ‡§∞‡§ñ‡•á‡§Ç",
                fingerprintBtnText: "‡§´‡§ø‡§Ç‡§ó‡§∞‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü ‡§∏‡•á‡§Ç‡§∏‡§∞",
                loginTitle: "‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡§∞‡•ç‡§§‡§æ ‡§≤‡•â‡§ó‡§ø‡§®",
                loginHealthIdLabel: "‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§Ü‡§à‡§°‡•Ä:",
                dashboardTitle: "‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡§∞‡•ç‡§§‡§æ ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°",
                navRegister: "‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£",
                navLogin: "‡§≤‡•â‡§ó‡§ø‡§®"
            },
            ml: {
                mainTitle: "‡¥°‡¥ø‡¥ú‡¥ø‡¥±‡µç‡¥±‡µΩ ‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø ‡¥∞‡¥ú‡¥ø‡¥∏‡µç‡¥ü‡µç‡¥∞‡µá‡¥∑‡µª",
                subtitle: "‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø‡¥ï‡¥∞‡¥Æ‡¥æ‡¥Ø ‡¥≠‡¥æ‡¥µ‡¥ø‡¥Ø‡¥ø‡¥≤‡µá‡¥ï‡µç‡¥ï‡µÅ‡¥≥‡µç‡¥≥ ‡¥°‡¥ø‡¥ú‡¥ø‡¥±‡µç‡¥±‡µΩ ‡¥§‡¥æ‡¥ï‡µç‡¥ï‡µã‡µΩ",
                formTitle: "‡¥∞‡¥ú‡¥ø‡¥∏‡µç‡¥ü‡µç‡¥∞‡µá‡¥∑‡µª ‡¥´‡µã‡¥Ç",
                nameLabel: "‡¥™‡µÇ‡µº‡¥£‡µç‡¥£ ‡¥®‡¥æ‡¥Æ‡¥Ç:",
                dobLabel: "‡¥ú‡¥®‡¥® ‡¥§‡µÄ‡¥Ø‡¥§‡¥ø:",
                cityLabel: "‡¥®‡¥ó‡¥∞‡¥Ç:",
                emailLabel: "‡¥á‡¥Æ‡µÜ‡¥Ø‡¥ø‡µΩ:",
                bloodGroupLabel: "‡¥∞‡¥ï‡µç‡¥§‡¥ó‡µç‡¥∞‡µÇ‡¥™‡µç‡¥™‡µç:",
                aadharLabel: "‡¥Ü‡¥ß‡¥æ‡µº ‡¥®‡¥Æ‡µç‡¥™‡µº:",
                aadharHelp: "12 ‡¥Ö‡¥ï‡µç‡¥ï ‡¥Ü‡¥ß‡¥æ‡µº ‡¥®‡¥Æ‡µç‡¥™‡µº ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï",
                healthIdTitle: "‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø ‡¥ê‡¥°‡¥ø ‡¥∏‡µÉ‡¥∑‡µç‡¥ü‡¥ø‡¥ö‡µç‡¥ö‡µÅ!",
                healthIdMessage: "‡¥≠‡¥æ‡¥µ‡¥ø‡¥Ø‡¥ø‡¥≤‡µÜ ‡¥≤‡µã‡¥ó‡¥ø‡¥®‡µÅ‡¥ï‡µæ‡¥ï‡µç‡¥ï‡¥æ‡¥Ø‡¥ø ‡¥à ‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø ‡¥ê‡¥°‡¥ø ‡¥∏‡µÇ‡¥ï‡µç‡¥∑‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï",
                healthProfileTitle: "‡¥µ‡¥ø‡¥∂‡¥¶‡¥Æ‡¥æ‡¥Ø ‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø ‡¥™‡µç‡¥∞‡µä‡¥´‡µà‡µΩ",
                chronicDiseasesLabel: "‡¥¶‡µÄ‡µº‡¥ò‡¥ï‡¥æ‡¥≤ ‡¥∞‡µã‡¥ó‡¥ô‡µç‡¥ô‡µæ:",
                chronicDiseasesHelp: "‡¥é‡¥®‡µç‡¥§‡µÜ‡¥ô‡µç‡¥ï‡¥ø‡¥≤‡µÅ‡¥Ç ‡¥¶‡µÄ‡µº‡¥ò‡¥ï‡¥æ‡¥≤ ‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø ‡¥Ö‡¥µ‡¥∏‡µç‡¥•‡¥ï‡µæ ‡¥™‡¥ü‡µç‡¥ü‡¥ø‡¥ï‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§‡µÅ‡¥ï",
                allergiesLabel: "‡¥Ö‡¥≤‡µº‡¥ú‡¥ø‡¥ï‡µæ:",
                allergiesHelp: "‡¥Ö‡¥±‡¥ø‡¥Ø‡¥æ‡¥µ‡µÅ‡¥®‡µç‡¥® ‡¥Ö‡¥≤‡µº‡¥ú‡¥ø‡¥ï‡µæ ‡¥™‡¥ü‡µç‡¥ü‡¥ø‡¥ï‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§‡µÅ‡¥ï",
                emergencyContactLabel: "‡¥Ö‡¥ü‡¥ø‡¥Ø‡¥®‡µç‡¥§‡¥∞ ‡¥¨‡¥®‡µç‡¥ß‡¥™‡µç‡¥™‡µÜ‡¥ü‡µá‡¥£‡µç‡¥ü ‡¥µ‡µç‡¥Ø‡¥ï‡µç‡¥§‡¥ø:",
                emergencyContactHelp: "‡¥Ö‡¥ü‡¥ø‡¥Ø‡¥®‡µç‡¥§‡¥∞ ‡¥¨‡¥®‡µç‡¥ß‡¥™‡µç‡¥™‡µÜ‡¥ü‡µá‡¥£‡µç‡¥ü ‡¥µ‡µç‡¥Ø‡¥ï‡µç‡¥§‡¥ø‡¥Ø‡µÅ‡¥Ç ‡¥´‡µã‡µ∫ ‡¥®‡¥Æ‡µç‡¥™‡¥±‡µÅ‡¥Ç",
                currentMedicationLabel: "‡¥®‡¥ø‡¥≤‡¥µ‡¥ø‡¥≤‡µÜ ‡¥Æ‡¥∞‡µÅ‡¥®‡µç‡¥®‡µÅ‡¥ï‡µæ:",
                currentMedicationHelp: "‡¥°‡µã‡¥∏‡µá‡¥ú‡µç ‡¥∏‡¥π‡¥ø‡¥§‡¥Ç ‡¥®‡¥ø‡¥≤‡¥µ‡¥ø‡¥≤‡µÜ ‡¥Æ‡¥∞‡µÅ‡¥®‡µç‡¥®‡µÅ‡¥ï‡µæ ‡¥™‡¥ü‡µç‡¥ü‡¥ø‡¥ï‡¥™‡µç‡¥™‡µÜ‡¥ü‡µÅ‡¥§‡µç‡¥§‡µÅ‡¥ï",
                fingerprintTitle: "‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø ‡¥∏‡µç‡¥ï‡¥æ‡µª",
                fingerprintMessage: "‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø ‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥®‡¥Ø‡µç‡¥ï‡µç‡¥ï‡¥æ‡¥Ø‡¥ø ‡¥®‡¥ø‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥ü‡µÜ ‡¥§‡¥≥‡µç‡¥≥‡¥µ‡¥ø‡¥∞‡µΩ ‡¥∏‡µÜ‡µª‡¥∏‡¥±‡¥ø‡µΩ ‡¥µ‡¥Ø‡µç‡¥ï‡µç‡¥ï‡µÅ‡¥ï",
                fingerprintBtnText: "‡¥´‡¥ø‡¥Ç‡¥ó‡µº‡¥™‡µç‡¥∞‡¥ø‡¥®‡µç‡¥±‡µç ‡¥∏‡µÜ‡µª‡¥∏‡µº",
                loginTitle: "‡¥§‡µä‡¥¥‡¥ø‡¥≤‡¥æ‡¥≥‡¥ø ‡¥≤‡µã‡¥ó‡¥ø‡µª",
                loginHealthIdLabel: "‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø ‡¥ê‡¥°‡¥ø:",
                dashboardTitle: "‡¥§‡µä‡¥¥‡¥ø‡¥≤‡¥æ‡¥≥‡¥ø ‡¥°‡¥æ‡¥∑‡µç‡¥¨‡µã‡µº‡¥°‡µç",
                navRegister: "‡¥∞‡¥ú‡¥ø‡¥∏‡µç‡¥±‡µç‡¥±‡µº",
                navLogin: "‡¥≤‡µã‡¥ó‡¥ø‡µª"
            }
        };

        // Initialize Speech Recognition
        let recognition = null;
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.continuous = false;
            recognition.interimResults = false;
        }

        // Language change handler
        document.getElementById('languageSelect').addEventListener('change', function() {
            currentLanguage = this.value;
            updateLanguage();
            if (recognition) {
                recognition.lang = currentLanguage === 'hi' ? 'hi-IN' : 
                                  currentLanguage === 'ml' ? 'ml-IN' : 'en-US';
            }
        });

        // Update language function
        function updateLanguage() {
            const t = translations[currentLanguage];
            Object.keys(t).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    if (element.tagName === 'INPUT' || element.tagName === 'BUTTON') {
                        if (element.type === 'submit' || element.type === 'button') {
                            element.textContent = t[key];
                        } else {
                            element.placeholder = t[key];
                        }
                    } else {
                        element.textContent = t[key];
                    }
                }
            });
        }

        // Voice input function
        function startVoiceInput(fieldId) {
            if (!recognition) {
                showMessage('Voice input not supported in this browser', 'error');
                return;
            }

            const field = document.getElementById(fieldId);
            const micBtn = event.target;
            
            micBtn.textContent = 'üî¥';
            micBtn.disabled = true;
            
            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                field.value = transcript;
                micBtn.textContent = 'üé§';
                micBtn.disabled = false;
            };
            
            recognition.onerror = function() {
                showMessage('Voice input failed. Please try again.', 'error');
                micBtn.textContent = 'üé§';
                micBtn.disabled = false;
            };
            
            recognition.onend = function() {
                micBtn.textContent = 'üé§';
                micBtn.disabled = false;
            };
            
            recognition.start();
        }

        // Generate Health ID
        async function generateHealthID() {
            const form = document.getElementById('basicForm');
            const formData = new FormData(form);
            const data = Object.fromEntries(formData);
            
            // Validate form
            const inputs = form.querySelectorAll('input[required], select[required]');
            let isValid = true;
            
            inputs.forEach(input => {
                if (!input.value) {
                    input.style.borderColor = '#ff6b6b';
                    isValid = false;
                } else {
                    input.style.borderColor = '#4CAF50';
                }
            });
            
            if (!isValid) {
                showMessage('Please fill in all required fields.', 'error');
                return;
            }
            
            try {
                const response = await fetch('/generate-health-id', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    currentHealthId = result.healthId;
                    currentUserData = result.userData;
                    document.getElementById('healthIdValue').textContent = result.healthId;
                    document.getElementById('basicForm').style.display = 'none';
                    document.getElementById('healthIdSection').style.display = 'block';
                    showMessage(result.message, 'success');
                } else {
                    showMessage(result.message, 'error');
                }
            } catch (error) {
                showMessage('Failed to generate Health ID. Please try again.', 'error');
                console.error('Health ID generation error:', error);
            }
        }

        // Show ABY verification
        function showABYVerification() {
            document.getElementById('healthIdSection').style.display = 'none';
            document.getElementById('abyVerificationSection').style.display = 'block';
        }

        // Show health profile form
        function showHealthProfile() {
            document.getElementById('healthIdSection').style.display = 'none';
            document.getElementById('abyVerificationSection').style.display = 'none';
            document.getElementById('healthProfileSection').style.display = 'block';
        }

        // Complete registration with health profile
        document.getElementById('healthProfileForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const profileFormData = new FormData(this);
            const profileData = Object.fromEntries(profileFormData);
            
            const completeData = {
                health_id: currentHealthId,
                ...currentUserData,
                ...profileData
            };
            
            try {
                const response = await fetch('/complete-registration', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(completeData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showMessage(result.message, 'success');
                    document.getElementById('healthProfileSection').style.display = 'none';
                    document.getElementById('fingerprintSection').style.display = 'block';
                } else {
                    showMessage(result.message, 'error');
                }
            } catch (error) {
                showMessage('Registration failed. Please try again.', 'error');
                console.error('Registration error:', error);
            }
        });

        // Fingerprint scanning
        document.getElementById('fingerprintBtn').addEventListener('click', async function() {
            if (!currentHealthId) {
                showMessage('Please complete registration first.', 'error');
                return;
            }
            
            this.disabled = true;
            this.innerHTML = '<span class="fingerprint-icon">üîÑ</span> <span>Scanning...</span>';
            
            setTimeout(async () => {
                try {
                    const response = await fetch('/fingerprint-scan', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({ healthId: currentHealthId })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        document.getElementById('scanResult').innerHTML = `
                            <div class="scan-success">
                                <h3>‚úÖ ${result.message}</h3>
                                <p>${result.healthStatus}</p>
                                <div class="success-actions">
                                    <button onclick="showLogin()" class="action-btn">Login with Health ID</button>
                                    <button onclick="showRegistration()" class="action-btn">New Registration</button>
                                </div>
                            </div>
                        `;
                        showMessage('Health scan completed successfully!', 'success');
                    } else {
                        showMessage(result.message, 'error');
                    }
                } catch (error) {
                    showMessage('Fingerprint scan failed. Please try again.', 'error');
                    console.error('Fingerprint scan error:', error);
                }
                
                this.disabled = false;
                this.innerHTML = '<span class="fingerprint-icon">üëÜ</span> <span id="fingerprintBtnText">Fingerprint Sensor</span>';
                updateLanguage();
            }, 3000);
        });

        // ABY Verification form submission
        document.getElementById('abyVerificationForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const abyData = Object.fromEntries(formData);
            abyData.healthId = currentHealthId;
            
            try {
                const response = await fetch('/verify-aby', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(abyData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    document.getElementById('abyResult').innerHTML = `
                        <div class="aby-success">
                            <h3>‚úÖ ${result.message}</h3>
                            <div class="aby-card">
                                <p><strong>ABY Card Number:</strong> ${result.abyData.cardNumber}</p>
                                <p><strong>Coverage Amount:</strong> ‚Çπ${result.abyData.coverageAmount.toLocaleString()}</p>
                                <p><strong>Family Size:</strong> ${result.abyData.familySize} members</p>
                                <p><strong>Status:</strong> Active</p>
                            </div>
                            <div class="success-actions">
                                <button onclick="showHealthProfile()" class="action-btn">Continue to Health Profile</button>
                            </div>
                        </div>
                    `;
                    showMessage('ABY verification successful!', 'success');
                } else {
                    document.getElementById('abyResult').innerHTML = `
                        <div class="aby-error">
                            <h3>‚ùå ABY Verification Failed</h3>
                            <p>${result.message}</p>
                            <div class="error-actions">
                                <button onclick="showHealthProfile()" class="action-btn">Continue without ABY</button>
                            </div>
                        </div>
                    `;
                    showMessage(result.message, 'error');
                }
            } catch (error) {
                showMessage('ABY verification failed. Please try again.', 'error');
                console.error('ABY verification error:', error);
            }
        });

        // Login functionality (Enhanced with ABY)
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const healthId = document.getElementById('loginHealthId').value;
            
            try {
                const response = await fetch('/login-with-aby', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ healthId })
                });
                
                const result = await response.json();
                
                if (result.success) {
                    currentUser = result.user;
                    showDashboard(result.user);
                    showMessage(result.message, 'success');
                    
                    // Load additional data
                    loadHospitals();
                    loadFamilyMembers();
                } else {
                    showMessage(result.message, 'error');
                }
            } catch (error) {
                showMessage('Login failed. Please try again.', 'error');
                console.error('Login error:', error);
            }
        });

        // Show dashboard
        function showDashboard(user) {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'block';
            
            // Update profile tab
            document.getElementById('userProfile').innerHTML = `
                <div class="profile-card">
                    <h3>üë§ ${user.name}</h3>
                    <p><strong>Health ID:</strong> ${user.healthId}</p>
                    <p><strong>Email:</strong> ${user.email}</p>
                    <p><strong>City:</strong> ${user.city}</p>
                    <p><strong>Blood Group:</strong> ${user.bloodGroup}</p>
                    <p><strong>Date of Birth:</strong> ${user.dateOfBirth}</p>
                    <p><strong>Aadhar:</strong> ${user.aadharNumber || 'Not provided'}</p>
                    <p><strong>Fingerprint Scanned:</strong> ${user.fingerprintScanned ? '‚úÖ Yes' : '‚ùå No'}</p>
                    
                    <div class="health-details">
                        <h4>üè• Health Information</h4>
                        <p><strong>Chronic Diseases:</strong> ${user.chronicDiseases || 'None reported'}</p>
                        <p><strong>Allergies:</strong> ${user.allergies || 'None reported'}</p>
                        <p><strong>Emergency Contact:</strong> ${user.emergencyContact || 'Not provided'}</p>
                        <p><strong>Current Medication:</strong> ${user.currentMedication || 'None reported'}</p>
                    </div>
                    
                    <p><strong>Registered:</strong> ${new Date(user.createdAt).toLocaleDateString()}</p>
                </div>
            `;
            
            // Update ABY benefits tab
            if (user.abyBenefits) {
                document.getElementById('abyCardInfo').innerHTML = `
                    <div class="aby-card-details">
                        <div class="card-header">
                            <h4>üè• ABY Golden Card</h4>
                            <span class="card-status active">Active</span>
                        </div>
                        <div class="card-body">
                            <p><strong>Card Number:</strong> ${user.abyBenefits.cardNumber}</p>
                            <p><strong>Beneficiary:</strong> ${user.name}</p>
                            <p><strong>Family Size:</strong> ${user.abyBenefits.familySize} members</p>
                            <p><strong>State:</strong> ${user.abyBenefits.state || user.city}</p>
                            <p><strong>District:</strong> ${user.abyBenefits.district || 'Not specified'}</p>
                        </div>
                        <div class="coverage-info">
                            <h4>üí∞ Coverage Information</h4>
                            <div class="coverage-bar">
                                <div class="coverage-used" style="width: ${(user.abyBenefits.usedAmount / user.abyBenefits.coverageAmount) * 100}%"></div>
                            </div>
                            <p><strong>Total Coverage:</strong> ‚Çπ${user.abyBenefits.coverageAmount.toLocaleString()}</p>
                            <p><strong>Used Amount:</strong> ‚Çπ${user.abyBenefits.usedAmount.toLocaleString()}</p>
                            <p><strong>Remaining:</strong> ‚Çπ${user.abyBenefits.remainingAmount.toLocaleString()}</p>
                        </div>
                        <div class="qr-section">
                            <p>üì± <strong>Show this card at empaneled hospitals for cashless treatment</strong></p>
                        </div>
                    </div>
                `;
            } else {
                document.getElementById('abyCardInfo').innerHTML = `
                    <div class="no-aby">
                        <h4>‚ùå No ABY Benefits Found</h4>
                        <p>You are not enrolled in Ayushman Bharat Yojana.</p>
                        <button onclick="logout(); showRegistration();" class="action-btn">Register for ABY</button>
                    </div>
                `;
            }
        }

        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => tab.classList.remove('active'));
            
            // Remove active class from all tab buttons
            const tabBtns = document.querySelectorAll('.tab-btn');
            tabBtns.forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName + 'Tab').classList.add('active');
            
            // Add active class to clicked tab button
            event.target.classList.add('active');
            
            // Load specific data based on tab
            if (tabName === 'hospitals') {
                loadHospitals();
            } else if (tabName === 'family') {
                loadFamilyMembers();
            }
        }

        // Hospital search functionality
        async function searchHospitals() {
            const city = document.getElementById('hospitalCitySearch').value;
            const specialty = document.getElementById('specialtyFilter').value;
            
            try {
                const queryParams = new URLSearchParams();
                if (city) queryParams.append('city', city);
                if (specialty) queryParams.append('specialty', specialty);
                queryParams.append('limit', '20');
                
                const response = await fetch(`/empaneled-hospitals?${queryParams}`);
                const result = await response.json();
                
                if (result.success) {
                    displayHospitals(result.hospitals);
                } else {
                    showMessage('Failed to load hospitals', 'error');
                }
            } catch (error) {
                console.error('Hospital search error:', error);
                showMessage('Hospital search failed', 'error');
            }
        }

        // Load hospitals
        async function loadHospitals() {
            await searchHospitals();
        }

        // Display hospitals
        function displayHospitals(hospitals) {
            const hospitalsList = document.getElementById('hospitalsList');
            
            if (hospitals.length === 0) {
                hospitalsList.innerHTML = '<p>No hospitals found matching your criteria.</p>';
                return;
            }
            
            hospitalsList.innerHTML = hospitals.map(hospital => `
                <div class="hospital-card">
                    <h4>üè® ${hospital.name}</h4>
                    <p><strong>Code:</strong> ${hospital.code}</p>
                    <p><strong>Address:</strong> ${hospital.address}, ${hospital.city}, ${hospital.state}</p>
                    <p><strong>Phone:</strong> ${hospital.phone}</p>
                    <p><strong>Specialties:</strong> ${hospital.specialties.join(', ')}</p>
                    <div class="hospital-actions">
                        <button class="action-btn" onclick="callHospital('${hospital.phone}')">üìû Call</button>
                        <button class="action-btn" onclick="getDirections('${hospital.address}')">üó∫Ô∏è Directions</button>
                    </div>
                </div>
            `).join('');
        }

        // Family member management
        document.getElementById('addFamilyForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!currentUser) {
                showMessage('Please login first', 'error');
                return;
            }
            
            const formData = new FormData(this);
            const memberData = Object.fromEntries(formData);
            memberData.primaryHealthId = currentUser.healthId;
            
            try {
                const response = await fetch('/add-family-member', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(memberData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    showMessage('Family member added successfully!', 'success');
                    this.reset();
                    loadFamilyMembers();
                } else {
                    showMessage(result.message, 'error');
                }
            } catch (error) {
                console.error('Add family member error:', error);
                showMessage('Failed to add family member', 'error');
            }
        });

        // Load family members
        async function loadFamilyMembers() {
            if (!currentUser) return;
            
            try {
                const response = await fetch(`/family-members/${currentUser.healthId}`);
                const result = await response.json();
                
                if (result.success) {
                    displayFamilyMembers(result.familyMembers);
                }
            } catch (error) {
                console.error('Load family members error:', error);
            }
        }

        // Display family members
        function displayFamilyMembers(members) {
            const familyList = document.getElementById('familyMembersList');
            
            if (members.length === 0) {
                familyList.innerHTML = '<p>No family members added yet.</p>';
                return;
            }
            
            familyList.innerHTML = `
                <h4>Family Members (${members.length})</h4>
                ${members.map(member => `
                    <div class="family-member-card">
                        <h5>üë§ ${member.name}</h5>
                        <p><strong>Relation:</strong> ${member.relation}</p>
                        <p><strong>Age:</strong> ${member.age || 'Not specified'}</p>
                        <p><strong>Gender:</strong> ${member.gender || 'Not specified'}</p>
                        ${member.healthId ? `<p><strong>Health ID:</strong> ${member.healthId}</p>` : ''}
                        ${member.aadharNumber ? `<p><strong>Aadhar:</strong> ${member.aadharNumber}</p>` : ''}
                    </div>
                `).join('')}
            `;
        }

        // Helper functions
        function callHospital(phone) {
            window.open(`tel:${phone}`);
        }

        function getDirections(address) {
            const encodedAddress = encodeURIComponent(address);
            window.open(`https://maps.google.com/maps?q=${encodedAddress}`, '_blank');
        }

        // Navigation functions
        function showRegistration() {
            hideAllSections();
            document.getElementById('basicForm').style.display = 'block';
            resetForms();
        }

        function showLogin() {
            hideAllSections();
            document.getElementById('loginSection').style.display = 'block';
        }

        function logout() {
            hideAllSections();
            document.getElementById('loginSection').style.display = 'block';
            currentHealthId = null;
            currentUserData = null;
            resetForms();
            showMessage('Logged out successfully', 'success');
        }

        function hideAllSections() {
            const sections = ['basicForm', 'healthIdSection', 'abyVerificationSection', 'healthProfileSection', 'fingerprintSection', 'loginSection', 'dashboardSection'];
            sections.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.style.display = 'none';
            });
        }

        function resetForms() {
            document.getElementById('basicForm').reset();
            document.getElementById('healthProfileForm').reset();
            document.getElementById('loginForm').reset();
            document.getElementById('scanResult').innerHTML = '';
        }

        // Utility function to show messages
        function showMessage(message, type) {
            const messageArea = document.getElementById('messageArea');
            messageArea.innerHTML = `<div class="message ${type}">${message}</div>`;
            
            setTimeout(() => {
                messageArea.innerHTML = '';
            }, 5000);
        }

        // Aadhar number validation
        document.getElementById('aadhar_number').addEventListener('input', function() {
            this.value = this.value.replace(/\D/g, '');
        });

        // Initialize app
        updateLanguage();
        showRegistration();
    </script>
</body>
</html>